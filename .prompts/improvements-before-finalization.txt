---
Timestamp: 2026-02-23T22:32:51-0600
Summary: Tightened CI coverage signal for the durable review workflow by adding an explicit DB-backed review integration test step to the existing Postgres-backed CI test job. Refreshed the post-flight report to remove the stale “not enforced in CI” gap and promote `migrate + sync` idempotency CI coverage as the next systems-completeness priority.
Top 10 issues found:
- P2: CI still lacks an enforced DB integration test for `migrate` + repeated `sync` idempotency.
- P2: Raw parser coverage is still shallow (mostly `title`/`apply_url`) across initial adapters.
- P2: Scheduler mode remains minimally hardened (no run locks/metrics/retry policy).
- P3: Formal report JSON schema docs are still missing.
- P3: Formal Parquet schema docs are still missing.
- P3: `sample-source` generator artifacts remain in-tree and may confuse contributors.
- P3: Root `LICENSE` file is still missing.
- P3: Changelog/release checklist is still missing.
- P3: Tailwind installer script would benefit from checksum verification.
- P3: README/runbook could use a small operational-modes matrix.
If you applied any fixes during this run, list them with file paths + brief diff-style notes:
- `.github/workflows/ci.yml` :: + explicit `DB-backed review workflow integration test` step under the existing Postgres-backed `test` job :: makes durable review-flow coverage visible and harder to regress silently in CI
- `POST_FLIGHT_REPORT.md` :: refreshed tests/issues/next-steps to reflect explicit CI enforcement of the review workflow integration test :: keeps audit priorities accurate
---
Timestamp: 2026-02-23T22:21:11-0600
Summary: Added regression coverage for the newly implemented durable dedup/review workflow by creating a DB-backed `rhof-web` integration test that builds a temporary workspace, rewrites fixture bundles to trigger both auto-cluster and review cases, runs sync, asserts persisted dedup/review rows, and verifies `/review/{id}/resolve` updates Postgres state.
Top 10 issues found:
- P2: DB-backed review workflow integration coverage exists locally, but CI does not yet provision Postgres to run it.
- P2: Raw parser coverage is still shallow (mostly `title`/`apply_url`) across initial adapters.
- P2: Scheduler mode remains minimally hardened (no run locks/metrics/retry policy).
- P2: `migrate` + sync idempotency is still not covered by an automated DB integration test in CI.
- P3: Formal report JSON schema docs are still missing.
- P3: Formal Parquet schema docs are still missing.
- P3: `sample-source` generator artifacts remain in-tree and may confuse contributors.
- P3: Root `LICENSE` file is still missing.
- P3: Changelog/release checklist is still missing.
- P3: Tailwind installer script would benefit from checksum verification.
If you applied any fixes during this run, list them with file paths + brief diff-style notes:
- `crates/rhof-web/src/lib.rs` :: + DB-backed integration test (`sync -> dedup/review persistence -> POST /review/{id}/resolve`) with temporary workspace fixture rewrites :: adds regression coverage for durable review workflow
- `crates/rhof-web/Cargo.toml` :: + `tempfile` dev-dependency :: supports temp workspace integration test setup
- `POST_FLIGHT_REPORT.md` :: refreshed completeness/tests/issues/next-steps after adding DB-backed durable review workflow integration coverage :: keeps audit current
---
Timestamp: 2026-02-23T22:14:00-0600
Summary: Implemented the next highest-leverage systems-completeness item: durable dedup cluster persistence (`dedup_clusters` / `dedup_cluster_members`) and DB-backed review queue resolution via `/review/{id}/resolve`. Re-validated with workspace build/tests, `rhof-cli sync`, and a live web+Postgres end-to-end resolve check (row status flipped from open to resolved when `DATABASE_URL` was present).
Top 10 issues found:
- P2: Duplicate/review persistence paths are now implemented but under-tested because current fixtures rarely trigger duplicate/review scenarios.
- P2: Raw parser coverage is still shallow (mostly `title`/`apply_url`) across initial adapters.
- P2: Scheduler mode remains minimally hardened (no run locks/metrics/retry policy).
- P2: No automated DB integration test in CI for `migrate` + sync idempotency.
- P3: Formal report JSON schema docs are still missing.
- P3: Formal Parquet schema docs are still missing.
- P3: `sample-source` generator artifacts remain in-tree and may confuse contributors.
- P3: Root `LICENSE` file is still missing.
- P3: Changelog/release checklist is still missing.
- P3: Tailwind installer script would benefit from checksum verification.
If you applied any fixes during this run, list them with file paths + brief diff-style notes:
- `crates/rhof-sync/Cargo.toml` :: enabled `uuid` v5 feature :: supports deterministic dedup cluster IDs
- `crates/rhof-sync/src/lib.rs` :: + dedup cluster/member persistence after staged sync persistence (`persist_dedup_clusters`, DB upserts) :: makes dedup schema tables actively used
- `crates/rhof-web/src/lib.rs` :: review page now prefers DB-open review IDs and `/review/{id}/resolve` updates `review_items.status/resolved_at` when DB is configured :: makes review UI action durable
- `POST_FLIGHT_REPORT.md` :: refreshed traceability/score/issues/next-steps to reflect delivered dedup cluster persistence + durable review resolve :: keeps audit current
---
Timestamp: 2026-02-23T20:10:01-0600
Summary: Post-flight excellence audit of the full prompt plan (`.prompts/PROMPT_00_s.txt`..`PROMPT_10.txt`) against the as-built RHOF repository. Verified traceability, runtime entrypoints, tests, CI, docs, fixtures, adapter generator, and frontend artifacts; produced `POST_FLIGHT_REPORT.md` and `FRONT_FACING_IDEAS.md`.
Top 10 issues found:
- P1: `rhof-cli migrate` is stubbed while `just migrate` and runbook reference it.
- P1: Sync pipeline is staged-report-only and does not persist opportunities/opportunity_versions to Postgres.
- P1: Web UI reads report JSON + `sources.yaml` instead of canonical DB-backed read models.
- P1: `just tailwind` requires missing `./bin/tailwindcss` with no bootstrap/install path.
- P1: `sqlx-prepare` workflow is exposed/documented but sqlx runtime/query wiring is not implemented.
- P2: Scheduler config exists, but scheduler jobs do not actually invoke sync.
- P2: Adapters are fixture replay parsers; raw HTML/JSON parsing logic is not demonstrated yet.
- P2: Adapter CI contract checks are presence-based and do not enforce coverage threshold/parser correctness.
- P2: Prompt/docs command naming is inconsistent (`rhof` vs `rhof-cli`).
- P2: `docs/ARCHITECTURE.md` and `docs/DATA_MODEL.md` remain placeholders.
If you applied any fixes during this run, list them with file paths + brief diff-style notes:
- None (audit/reporting only; no repo code/docs behavior changes applied in this run).
---
---
Timestamp: 2026-02-23T21:37:11-0600
Summary: Applied prior P0/P1 fixes from the post-flight audit: sqlx-backed migrations and DB persistence, DB-preferred web loaders, Tailwind standalone installer/bootstrap workflow, and docs/quickstart updates. Re-verified with `cargo build`, `cargo test --workspace`, `rhof-cli migrate`, repeated `rhof-cli sync`, and Postgres row-count checks.
Top 10 issues found:
- P2: Scheduler exists but still does not execute sync jobs (`maybe_build_scheduler` logs only).
- P2: Adapters remain fixture replay parsers; raw artifact parsing is not implemented yet.
- P2: Adapter CI checks do not enforce evidence coverage threshold or parser correctness.
- P2: `sqlx-prepare` contributor workflow is still under-documented / not query-macro-based yet.
- P2: CLI naming inconsistency (`rhof` vs `rhof-cli`) remains in prompts/docs.
- P2: `docs/ARCHITECTURE.md` placeholder content remains.
- P2: `docs/DATA_MODEL.md` placeholder content remains.
- P3: `sample-source` generator scaffold remains in primary docs/source list.
- P3: Frontend visual polish is still minimal (Tailwind CSS file remains placeholder until build step is run).
- P3: Release packaging hygiene (LICENSE/changelog/checklist) is still missing.
If you applied any fixes during this run, list them with file paths + brief diff-style notes:
- `crates/rhof-sync/src/lib.rs` :: + sqlx embedded migrator + DB upsert/persistence path (sources/fetch_runs/raw_artifacts/opportunities/opportunity_versions/tags/risk_flags/review_items) :: fixes migrate stub and staged-only persistence
- `crates/rhof-cli/src/main.rs` :: `migrate` command now calls `rhof_sync::apply_migrations_from_env()` :: makes `just migrate` real
- `crates/rhof-web/src/lib.rs` :: dashboard loaders now prefer Postgres-backed sources/opportunities with YAML/report fallback :: fixes report-only web data path
- `crates/rhof-sync/Cargo.toml`, `crates/rhof-web/Cargo.toml`, `Cargo.lock` :: + `sqlx` dependencies/features :: enables runtime DB integration and embedded migrations
- `migrations/20260223210000_init_schema.up.sql` :: `IF NOT EXISTS` + conditional FK constraint block :: makes initial migration idempotent against pre-existing schema
- `justfile` :: + `tailwind-install` target :: provides reproducible Tailwind binary bootstrap
- `scripts/install-tailwind.sh` :: new standalone Tailwind downloader (version-pinned) :: fixes missing binary bootstrap path
- `README.md`, `docs/RUNBOOK.md` :: quickstart/runbook updated to `just migrate` + Tailwind install workflow :: removes outdated manual migration guidance
- `assets/tailwind/tailwind.config.js` :: fixed template content glob path :: aligns Tailwind scan paths with actual template location
- `POST_FLIGHT_REPORT.md`, `FRONT_FACING_IDEAS.md` :: refreshed after fix round with updated scoring/findings/directions :: re-ran post-flight audit loop
---
---
Timestamp: 2026-02-23T22:03:00-0600
Summary: Applied the remaining P2/P3 audit fixes that were safe to automate: scheduler command/runtime path, one real raw fixture parser path (Appen), stronger adapter contract checks, CLI naming alignment in prompts, architecture/data-model docs fill-in, source-doc cleanup for sample scaffold, sqlx-prepare contributor docs, and committed baseline UI CSS polish.
Top 10 issues found:
- P2: Only one adapter currently demonstrates raw fixture parsing; most adapters still replay `parsed_records`.
- P2: Dedup cluster tables are not yet populated even though review items are persisted.
- P2: `/review/:id/resolve` is still UI-only and does not update `review_items` in Postgres.
- P2: Scheduler mode is runnable but lacks operational hardening (metrics/run locks/retry policy).
- P3: `sample-source` generated fixtures/tests still live in the main tree and may be confused with supported adapters.
- P3: Formal schemas/docs for report JSON and Parquet outputs are still missing.
- P3: Packaging/release hygiene (root `LICENSE`, changelog, release checklist) is still missing.
- P3: No one-command demo script yet (db-up + migrate + sync + serve).
- P3: Frontend remains functionally polished but still not design-system-level or screenshot-optimized.
- P3: CI still lacks an explicit DB integration test for migrate+sync idempotency.
If you applied any fixes during this run, list them with file paths + brief diff-style notes:
- `crates/rhof-cli/src/main.rs`, `crates/rhof-sync/src/lib.rs` :: + `scheduler` command and runnable scheduler mode using cron jobs :: fixes non-operational scheduler path
- `crates/rhof-adapters/src/lib.rs`, `crates/rhof-adapters/Cargo.toml` :: + raw fixture hydration + Appen HTML parsing with `scraper` + runtime registration :: demonstrates real parser path beyond fixture replay
- `scripts/check_adapters.py` :: enforce non-empty `parsed_records`/snapshot and `evidence_coverage_percent >= 90` for enabled sources :: strengthens adapter contract checks
- `README.md`, `docs/RUNBOOK.md` :: documented scheduler mode and `sqlx-prepare` prerequisites/workflow :: resolves contributor tooling ambiguity
- `docs/ARCHITECTURE.md`, `docs/DATA_MODEL.md` :: replaced placeholders with as-built architecture/data model docs :: improves traceability/onboarding
- `docs/SOURCES.md` :: relabeled `sample-source` as generator example (not enabled source) :: reduces support-surface confusion
- `.prompts/PROMPT_07.txt` :: aligned CLI example naming to `rhof-cli` :: consistency fix
- `assets/static/app.css` :: replaced placeholder CSS with committed baseline styling :: improves frontend polish before Tailwind build
- `POST_FLIGHT_REPORT.md` :: refreshed post-flight audit with updated score/issues after P2/P3 fix round
---
---
Timestamp: 2026-02-23T21:57:34-0600
Summary: Implemented the next highest-leverage item from the post-flight report: expanded real raw fixture parsing across the initial adapters (HTML title/apply parsing for Appen/Clickworker/OneForma/TELUS and JSON title/apply parsing for Prolific), while preserving fixture/snapshot determinism. Re-validated with `cargo test -p rhof-adapters`, `python3 scripts/check_adapters.py`, and `cargo test --workspace`.
Top 10 issues found:
- P2: Raw parser coverage is still shallow (mostly title/apply); broader canonical fields still depend on fixture `parsed_records`.
- P2: Dedup cluster tables are not yet populated.
- P2: `/review/:id/resolve` remains UI-only and not persisted to `review_items`.
- P2: Scheduler mode exists but lacks hardening (locks/metrics/retry/health visibility).
- P3: `sample-source` generated fixtures/tests remain in main tree.
- P3: Formal report JSON schema docs are still missing.
- P3: Formal Parquet schema docs are still missing.
- P3: Root `LICENSE` file is still missing.
- P3: Changelog/release checklist is still missing.
- P3: CI still lacks DB integration coverage for migrate+sync idempotency.
If you applied any fixes during this run, list them with file paths + brief diff-style notes:
- `crates/rhof-adapters/src/lib.rs` :: generalized raw fixture parsing helpers (HTML + JSON) and applied to all initial adapters :: increases real parser coverage while keeping snapshot compatibility
- `crates/rhof-adapters/Cargo.toml`, `Cargo.lock` :: added `scraper` dependency :: supports HTML fixture parsing
- `POST_FLIGHT_REPORT.md` :: refreshed score/issue wording for improved adapter parser coverage after this round
---
